<Window x:Class="CTViewer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CTViewer"
		xmlns:views="clr-namespace:CTViewer.Views"
        mc:Ignorable="d"
        Title="CTViewer" Height="800" Width="1000"
        >
    <!--KeyDown="Window_KeyDown"
        FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}">-->

	<Grid Grid.Row="0">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<!-- Top Buttons -->
			<RowDefinition Height="Auto"/>
			<!-- Drawing Menu -->
			<RowDefinition Height="*"/>
			<!-- Image & Overlay -->
			<RowDefinition Height="Auto"/>
			<!-- Sliders -->
		</Grid.RowDefinitions>

		<!-- 📂 Open / Reset Buttons -->
		<StackPanel Orientation="Horizontal" Margin="10" Grid.Row="0">
			<Button Content="Open DICOM"
                    Click="OpenDicom_Click"
                    Width="120"
                    Height="30"
                    Margin="0,0,10,0"/>
			<!--<Button Content="Open Folder"
                    Click="OpenFolder_Click"
                    Width="120"
                    Height="30"
                    Margin="0,0,10,0"/>-->
			<Button Content="Reset View"
                    Click="ResetView_Click"
                    Width="120"
                    Height="30"
                    Margin="0,0,10,0"/>
			<Button Content="Reset Contrast"
                    Click="ResetContrast_Click"
                    Width="120"
                    Height="30"
                    Margin="10,0,0,0"/>
			<!--<Button Content="Previous"
                    Click="PreviousImage_Click"
                    Width="80"
                    Margin="5"/>
            <Button Content="Next"
                    Click="NextImage_Click"
                    Width="80"
                    Margin="5"/>
            <TextBlock x:Name="ImageIndexText"
                   VerticalAlignment="Center"
                   Margin="10,0,0,0"
                   FontWeight="Bold"/>-->
		</StackPanel>
		<views:AnnotationMenu x:Name="AnnotationMenu" Grid.Row="1" />
		<!-- 🖼️ Image Display -->
		<Grid Grid.Row="2">
            <Canvas x:Name="OverlayCanvas"
                    Background="Transparent"
                    IsHitTestVisible="True"
                    Panel.ZIndex="1"
                    MouseDown="OverlayCanvas_MouseDown"
                    MouseMove="OverlayCanvas_MouseMove" />
            <Image x:Name="MainImage"
                   Stretch="None"
                   RenderTransformOrigin="0.5,0.5"/>
            <views:PatientMetabase x:Name="PatientMetabase"
                                   Panel.ZIndex="2"/>

        </Grid>

		<!-- 🛠️ Brightness & Contrast Sliders -->
		<StackPanel Orientation="Horizontal" Grid.Row="3" Margin="10">
			<TextBlock Text="Brightness:" VerticalAlignment="Center" Margin="0,0,10,0"/>
			<Slider x:Name="BrightnessSlider"
                    Minimum="-100"
                    Maximum="100"
                    Value="0"
                    Width="200"
                    ValueChanged="Slider_ValueChanged"
                    Margin="0,0,30,0"/>
            <TextBlock Text="Contrast:" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <Slider x:Name="ContrastSlider"
                    Minimum="0.5"
                    Maximum="2.0"
                    Value="1"
                    Width="200"
                    ValueChanged="Slider_ValueChanged"/>
        </StackPanel>
    </Grid>
</Window>
